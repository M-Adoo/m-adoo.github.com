<!DOCTYPE html>
<html lang="en">
<head>
        <title>Qt Quick 笔记（2）——用户界面相关</title>
        <meta charset="utf-8" />
        <link rel="stylesheet" href="http://www.roading.org/theme/css/main.css" type="text/css" />
        
        <link href="http://www.roading.org/feed/index.xml" type="application/atom+xml" rel="alternate" title="Adoo's blog Atom Feed" />
        
        
        <link href="http://www.roading.org/feed/all.rss" type="application/rss+xml" rel="alternate" title="Adoo's blog RSS Feed" />
        
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <div id="siteinfo"><a id="sitename" rel="nofollow" href="http://www.roading.org">Adoo's blog </a><span id="subsitename"> 怀理想主义，行务实之道。</span></div>

		
			
<div id="header-search-form">
<gcse:searchbox-only>Loading...</gcse:searchbox-only>
</div>

		
                <div class="clear"></div>
		<nav>
			<ul id= "nav-pages">
				
				
				    <li><a href="http://www.roading.org/pages/about-me.html">About me</a></li>
				
				    <li><a href="http://www.roading.org/pages/links.html">links</a></li>
				
				    <li><a href="http://www.roading.org/pages/message.html">Message</a></li>
				
				    <li><a href = "http://www.roading.org/tweets.html">Tweets</a></li>
				    <li><a href="http://www.roading.org/archives.html">Archive</a></li>
				
		        </ul>
			<ul id="nav-tags">
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
       					 <li><a href="http://www.roading.org/tag/bi-ji.html" title="或为读书笔记，或偶有心得">笔记</a></li>
    					
				
					
				
					
				
					
				
					
				
					
       					 <li><a href="http://www.roading.org/tag/sui-bi.html" title="人生愁几许？难有不悲秋！">随笔</a></li>
    					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
			</ul>
			<div class="clear"></div>
			<hr>
			
<div class="crumbs">
<a href="http://www.roading.org" title ="Back to homepage">Home</a> »

<a href="http://www.roading.org/category/qt.html">QT</a> »

Qt Quick 笔记（2）——用户界面相关
</div>
 
		</nav>
	</header><!-- /#banner -->

        
    <div class="article-page">
	<h1>Qt Quick 笔记（2）——用户界面相关</h1>
	<div class="content">
	      <div class="post-info">
        <abbr class="published" title="2012-02-24T15:34:00">
                Fri 24 February 2012
        </abbr>
        
        <address class="article_author">
                By <a class="url fn" href="http://www.roading.org/author/adoo.html">Adoo</a>
        </address>
        		
	
	    <abbr title="qml&nbsp;&nbsp;QT&nbsp;&nbsp;qt quick&nbsp;&nbsp;笔记&nbsp;&nbsp;">
	    Tags: 
		<a title="permalink to qml" href="http://www.roading.org/tag/qml.html">qml</a>
	          
		<a title="permalink to QT" href="http://www.roading.org/tag/qt.html">QT</a>
	          
		<a title="permalink to qt quick" href="http://www.roading.org/tag/qt-quick.html">qt quick</a>
	          
		<a title="permalink to 笔记" href="http://www.roading.org/tag/bi-ji.html">笔记</a>
	          
	    </abbr>
	
	<abbr>In <a title="permalink to QT" href="http://www.roading.org/category/qt.html">QT</a></abbr>
	
	
</div><!-- /.post-info -->
	      <h3>Nested ELements</h3>
<p>在QML中的 UI 元素是以树形结构组织的,因此“<em>Elements are often nested</em>”——也就是说，
一个元素可以包含很多个其它元素。</p>
<p>一个例子：</p>
<div class="codehilite"><pre><span class="n">import</span> <span class="n">QtQuick</span> 1<span class="p">.</span>1 
<span class="n">Rectangle</span><span class="p">{</span>
    <span class="n">width</span><span class="p">:</span> 400 <span class="p">;</span> <span class="n">height</span><span class="p">:</span> 300
    <span class="n">color</span><span class="p">:</span>&quot;<span class="n">gray</span>&quot;
    <span class="n">Rectangle</span><span class="p">{</span>
        <span class="n">x</span><span class="p">:</span>50<span class="p">;</span> <span class="n">y</span><span class="p">:</span> 50
        <span class="n">width</span><span class="p">:</span>300<span class="p">;</span> <span class="n">height</span><span class="p">:</span> 200
        <span class="n">color</span><span class="p">:</span> &quot;<span class="n">lightblue</span>&quot;
        <span class="n">Rectangle</span><span class="p">{</span>
            <span class="n">x</span><span class="p">:</span>50 <span class="p">;</span> <span class="n">y</span><span class="p">:</span> 50
            <span class="n">width</span><span class="p">:</span> 200 <span class="p">;</span> <span class="n">height</span><span class="p">:</span> 100<span class="p">;</span>
            <span class="n">color</span><span class="p">:</span>&quot;<span class="n">red</span>&quot;
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p>上例中浅蓝色和红色的矩形都是“Nested Element”，通过右边的显示效果可以看出，每一个
“Nested Element”设定的位置都是相对于父元素的，而不是绝对位置。</p>
<h3>Graphical Elements</h3>
<p>三种要讨论的元素： Colors, gradients and images。通过这三种元素可以创建起具有吸
引力的 UI 。</p>
<h4>Colors:可以用三种方式来设置：</h4>
<ul>
<li>直接用一个颜色名字的字符串来表示：例如 "red","blue"",lightblue"…</li>
<li>直接用一个6位的十六进制字符串来表示：例如<code>#ff00ff</code>，六位中每两位代表三原色中
    的一种，其顺序为红绿蓝。</li>
<li>使用一个函数来进行设置。如：Qt.rgba(0, 0.75, 0 , 1)。其中四个参数的范围应该
    都在0到1之间。前三个参数表示三原色，后一个参数表示<strong>不</strong>透明度。<br />
</li>
</ul>
<p>三种方法的实例：</p>
<div class="codehilite"><pre><span class="n">import</span> <span class="n">QtQuick</span> 1<span class="p">.</span>1 
<span class="n">Item</span><span class="p">{</span>
    <span class="n">width</span><span class="p">:</span>150<span class="p">;</span>  <span class="n">height</span><span class="p">:</span> 50
    <span class="n">Rectangle</span><span class="p">{</span>
        <span class="n">width</span><span class="p">:</span>50<span class="p">;</span> <span class="n">height</span><span class="p">:</span> 50
        <span class="n">color</span><span class="p">:</span> &quot;<span class="n">red</span>&quot;
    <span class="p">}</span>
    <span class="n">Rectangle</span><span class="p">{</span>
        <span class="n">x</span><span class="p">:</span>50 <span class="p">;</span> <span class="n">y</span><span class="p">:</span>0
        <span class="n">width</span><span class="p">:</span> 50 <span class="p">;</span> <span class="n">height</span><span class="p">:</span>50<span class="p">;</span>
        <span class="n">color</span><span class="p">:</span> &quot;#00<span class="n">ff00</span>&quot;
    <span class="p">}</span>
    <span class="n">Rectangle</span><span class="p">{</span>
        <span class="n">x</span><span class="p">:</span>100 <span class="p">;</span> <span class="n">y</span><span class="p">:</span> 0
        <span class="n">width</span><span class="p">:</span> 50 <span class="p">;</span> <span class="n">height</span><span class="p">:</span> 50<span class="p">;</span>
        <span class="n">color</span><span class="p">:</span><span class="n">Qt</span><span class="p">.</span><span class="n">rgba</span><span class="p">(</span>0<span class="p">,</span>0<span class="p">,</span>1<span class="p">,</span>1<span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h4>Images</h4>
<p>可以看下面一个关于图像的实例，这个实例将呈现一幅图片，并且在点击图片的时候会将图
片放大两倍并以右下角为轴心旋转45度。</p>
<div class="codehilite"><pre><span class="n">import</span> <span class="n">QtQuick</span> 1<span class="p">.</span>1
<span class="n">Rectangle</span> <span class="p">{</span>
    <span class="n">width</span><span class="p">:</span> 200 <span class="p">;</span> <span class="n">height</span><span class="p">:</span> 200
    <span class="n">color</span><span class="p">:</span> &quot;<span class="n">gray</span>&quot;
   <span class="n">Image</span><span class="p">{</span>
       <span class="n">anchors</span><span class="p">.</span><span class="n">centerIn</span><span class="p">:</span> <span class="n">parent</span>
       <span class="n">source</span><span class="p">:</span> &quot;<span class="p">.</span><span class="o">./</span>捕获<span class="p">.</span><span class="n">PNG</span>&quot;
       <span class="n">transformOrigin</span><span class="p">:</span> <span class="n">Item</span><span class="p">.</span><span class="n">Center</span>
       <span class="n">MouseArea</span><span class="p">{</span>
           <span class="n">anchors</span><span class="p">.</span><span class="n">fill</span><span class="p">:</span> <span class="n">parent</span>
           <span class="n">onClicked</span><span class="p">:</span> <span class="p">{</span>
               <span class="n">parent</span><span class="p">.</span><span class="n">scale</span><span class="p">=</span>2
               <span class="n">parent</span><span class="p">.</span><span class="n">rotation</span><span class="p">=</span>45
           <span class="p">}</span>
       <span class="p">}</span>
   <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p>Image的长宽由图像决定。其路径用source来设定，可以用绝对路径也可以使用相对路径，
当然网路图片也是可以的。”../”表示父级目录。用scale来设定放大的倍数，用
tansformOrigin 来设定旋转的轴心。rotation可以用来设定旋转的度数。<br />
</p>
<h4>Gradient</h4>
<p>实例：</p>
<div class="codehilite"><pre><span class="n">import</span> <span class="n">QtQuick</span> 1<span class="p">.</span>1
<span class="n">Rectangle</span> <span class="p">{</span>
    <span class="n">width</span><span class="p">:</span> 200 <span class="p">;</span> <span class="n">height</span><span class="p">:</span> 400
    <span class="n">gradient</span><span class="p">:</span> <span class="n">Gradient</span><span class="p">{</span>
        <span class="n">GradientStop</span><span class="p">{</span>
            <span class="n">position</span><span class="p">:</span> 0<span class="p">.</span>0
            <span class="n">color</span><span class="p">:</span> &quot;<span class="n">blue</span>&quot;
        <span class="p">}</span>
        <span class="n">GradientStop</span><span class="p">{</span>
            <span class="n">position</span><span class="p">:</span> 1<span class="p">.</span>0
            <span class="n">color</span><span class="p">:</span>  &quot;<span class="n">black</span>&quot;
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p>如上例所示，可以用一个gradient属性来设置渐变。用Gradient来作为其值。Gradient可以
包含一个或更多的GradientStop 。每一个GradientStop包含一个position属性和一个color
属性。position属性的值，只能从0到1。</p>
<p>设置gradient属性后，color属性将被覆盖掉。</p>
<p>官方推荐使用渐变的图片来代替gradient，因为gradient会占用大量的cpu，并且渐变的效
果可能并没有你期望的那么生动。</p>
<h3>文本</h3>
<p>qml中的文本既可以用来呈现文本，同时也能进行文本的输入。</p>
<p>用 Text 来简单呈现文本：</p>
<div class="codehilite"><pre>import QtQuick 1.1
Rectangle {
    width: 200 ; height: 100
    color: &quot;gray&quot;
    Text{
        text: &quot;<span class="nt">&lt;h1&gt;</span>我本将心向明月，奈何明月照沟渠。<span class="nt">&lt;/h1&gt;</span>&quot;
        font.family: &quot;楷体&quot;
        color:&quot;white&quot;
    }
}
</pre></div>


<p>Text 支持简单的文本呈现，同时它也支持富文本的显示。如上例中我就用了
<code>&lt;h1&gt;…&lt;/h1&gt;</code>这对标签。</p>
<p>用 TextInput 来接受文本的录入：</p>
<div class="codehilite"><pre><span class="n">import</span> <span class="n">QtQuick</span> 1<span class="p">.</span>1
<span class="n">Rectangle</span><span class="p">{</span>
    <span class="n">width</span><span class="p">:</span> 300<span class="p">;</span> <span class="n">height</span><span class="p">:</span> 200<span class="p">;</span>
    <span class="n">color</span><span class="p">:</span>&quot;<span class="n">black</span>&quot;
    <span class="n">TextInput</span><span class="p">{</span>
        <span class="n">color</span><span class="p">:</span> &quot;<span class="n">white</span>&quot;
        <span class="n">width</span><span class="p">:</span> 200<span class="p">;</span>
        <span class="n">font</span><span class="p">.</span><span class="n">pixelSize</span><span class="p">:</span> 16
        <span class="n">text</span><span class="p">:</span>&quot;举杯邀明月，对影成三人<span class="p">...</span>&quot;
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p>一个很简单的文本输入控件，没有任何的装饰。如果没有设置它的宽度的时候，其宽度会
随着字串的长度而改变。</p>
<h3>Anchors</h3>
<p>我们知道可以用x与y属性来确定元素相对于其父亲的位置。使用Anchors则是另外一个重要
的布局手段，Anchors 主要用来定位和对齐元素。</p>
<p>位置示意图：(另外还有centerIn和fill)</p>
<p><img alt="位置示意图" src="http://www.roading.org/images/2012-02/image_thumb8.png" /></p>
<p>一个实例：直接关联到其父</p>
<div class="codehilite"><pre><span class="n">import</span> <span class="n">QtQuick</span> 1<span class="p">.</span>1
<span class="n">Rectangle</span> <span class="p">{</span>
    <span class="n">width</span><span class="p">:</span> 200 <span class="p">;</span>    <span class="n">height</span><span class="p">:</span> 150
    <span class="n">color</span><span class="p">:</span> &quot;<span class="n">lightblue</span>&quot;
    <span class="n">Rectangle</span><span class="p">{</span>
        <span class="n">width</span><span class="p">:</span> 50<span class="p">;</span>  <span class="n">height</span><span class="p">:</span> 50
        <span class="n">color</span><span class="p">:</span>&quot;<span class="n">gray</span>&quot;
        <span class="n">anchors</span><span class="p">.</span><span class="n">centerIn</span><span class="p">:</span> <span class="n">parent</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p>也可以关联到其父亲的Anchors,此时这样写:<code>anchors.right: parent.right</code>不需要(也不
能)这样：<code>anchors.right : parent.anchors.right</code></p>
<p>Anchors 也可以用来对边缘留白,示意图如下：</p>
<p><img alt="" src="http://www.roading.org/images/2012-02/image_thumb10.png" /></p>
<p>用法则与上面的 right ,left 之类的如出一辙。</p>
<p>摘录一段关于 Anchors 的忠告，以及使用策略。</p>
<blockquote>
<h4>Hints and Tips – Anchors</h4>
<ul>
<li>Anchors can only be used with parent and sibling items</li>
<li>
<p>Anchors work on constraints</p>
<ul>
<li>some items need to have well-defined positions and sizes</li>
<li>items without default sizes should be anchored to fixed
    orwell-defined items</li>
</ul>
</li>
<li>
<p>Anchors creates dependencies on geometries of other items</p>
<ul>
<li>creates an order in which geometries are calculated</li>
<li>
<p>avoid creating circular dependencies</p>
</li>
<li>
<p>e.g., parent!child!parent</p>
</li>
</ul>
</li>
<li>
<p>Margins are only used if the corresponding anchors are used</p>
<ul>
<li>e.g.,leftMarginneedsleftto be defined</li>
</ul>
</li>
</ul>
<h4>Strategies for Use – Anchors</h4>
<p>Identify item with different roles in the user interface:</p>
<ul>
<li>
<p>Fixed items</p>
<ul>
<li>make sure these have id properties defined</li>
<li>unless these items can easily be referenced as parent items</li>
</ul>
</li>
<li>
<p>Items that dominate the user interface</p>
<ul>
<li>make sure these have id properties defined</li>
</ul>
</li>
<li>
<p>Items that react to size changes of the dominant items</p>
<ul>
<li>give these anchors that refer to the dominant or fixed items</li>
</ul>
</li>
</ul>
<p>参考资料：<a href="http://qt.nokia.com/learning/online/training/materials/qt-essentials-qt-quick-edition">Qt Quick for C++ Developers</a></p>
</blockquote>
		  <p style= "text-align:right;"><em>
		  Fri 24 February 2012 By <a class="url fn" href="http://www.roading.org/pages/about-me.html">Adoo</a>
		  (<a href = "http://www.roading.org/pages/message.html">Contact me</a>)</em></p>
		  <p style="text-align:right;"><em>欢迎你与我交流探讨，如有错误疏漏之处，恳请指正。
		  (<a href="http://www.roading.org//Qt/about-ui.html">本文原链</a>)</em></p>
	    <span class = "left">Share this with your friends:</span>
	    <div id="bdshare" class="bdshare_t bds_tools get-codes-bdshare">
		<a class="bds_tsina"></a>
		<a class="bds_qzone"></a>
		<a class="bds_tqq"></a>
		<a class="bds_douban"></a>
		<a class="bds_taobao"></a>
		<a class="bds_renren"></a>
		<a class="bds_kaixin001"></a>
		<a class="bds_twi"></a>
		<a class="bds_copy"></a>
	    </div>     
	<div class="ds-thread"></div>
	</div>
        <div class="sidebar">
		<div id="relative-articles">
		<h3>Related Posts</h3>
		<ul class="related-articles">
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		   <li class="selected">Qt Quick 笔记（2）——用户界面相关</li>
		
		
		
		   
		   <li><a title="Qt Quick 笔记（1）：初识 Qt Quick" href="http://www.roading.org/develop/cpp/qt/%e5%88%9d%e8%af%86-qt-quick.html">Qt Quick 笔记（1）：初识 Qt Quick</a></li>
		   
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		</ul>
		</div>
		
<h3>Contact me</h3>
<div class="social">
	<span style="font-size:15px">I'm here:</span>	
	<a href="http://www.roading.org/feed/index.xml" type="application/atom+xml" title="Atom feed" rel="alternate"><img src="http://www.roading.org/theme/images/icons/rss.png"></img></a>
	

	
	<a href="http://twitter.com/Monkey_Adoo" title="@Monkey_Adoo"><img src="http://www.roading.org/theme/images/icons/twitter.png"></img></a>
	
	<a href="http://weibo.com/boringMonkey" title="@M-Adoo"><img src="http://www.roading.org/theme/images/icons/weibo.png"></img></a>
	
	<a href="http://douban.com/people/Monkey_Adoo" title="Adoo"><img src="http://www.roading.org/theme/images/icons/douban.png"></img></a>
	
	
	<a rea="tomail" title="Adoo@outlook.com" href="mailto:Adoo@outlook.com"><img src="http://www.roading.org/theme/images/icons/email.png"></img></a>
	
	</div><!-- /.social -->
	
	</div>
	</div>

<div class="clear"></div>
 <div id="footer">
	<a class="right" href="#banner"  titile="Back to Top" rel="nofollow" title="Back to top">Top↑</a>
	<ul id="footer-nav" class="right">
	
		<li><a href="http://www.roading.org/pages/about-me.html">About me</a></li>
	
		<li><a href="http://www.roading.org/pages/links.html">links</a></li>
	
		<li><a href="http://www.roading.org/pages/message.html">Message</a></li>
	
		<li><a href="http://www.roading.org/archives.html">Archive</a></li>
	</ul>
	<div class="clear"></div>
	<p>Theme designed by Adoo. Powered by Pelican. &copy; 2011-2012</p>
       </div>

	<script type="text/javascript">
	var duoshuoQuery = {short_name:"adoo"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = 'http://static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>


<!-- Google Search -->

<script>
  (function() {
    var cx = '014593096765008582725:vpqn4f4zw88';
    var gcse = document.createElement('script'); gcse.type = 'text/javascript'; gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
	'//www.google.com/cse/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(gcse, s);
  })();
</script>


<!-- Google Analytics -->

    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
        var pageTracker = _gat._getTracker("UA-29709820-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>


<!-- 百度分享 -->
<script type="text/javascript" id="bdshare_js" data="type=tools" ></script>
<script type="text/javascript" id="bdshell_js"></script>
<script type="text/javascript">
	document.getElementById("bdshell_js").src = "http://bdimg.share.baidu.com/static/js/shell_v2.js?cdnversion=" + new Date().getHours();
</script>
<!-- Baidu Button END -->

</body>
</html>